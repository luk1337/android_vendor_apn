name: build

runs:
    using: composite

    steps:
    - name: Install dependencies
      shell: bash
      run: sudo apt update && sudo apt -y install libxml2-utils

    - name: Validate configs
      shell: bash
      run: xmllint --noout --schema apns-conf.xsd *.xml

    - name: Format configs
      shell: bash
      run: |
        ./format.py
        if [[ ! -z $(git status -s) ]]; then
          git status
          exit -1
        fi
